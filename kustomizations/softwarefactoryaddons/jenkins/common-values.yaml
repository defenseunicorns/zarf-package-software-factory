controller:
  image: "registry1.dso.mil/ironbank/opensource/jenkins/jenkins"
  tag: "2.346.1-lts"
  disableRememberMe: true
  resources:
    requests:
      cpu: "50m"
      memory: "256Mi"
    limits:
      cpu: "2000m"
      memory: "4096Mi"
  initContainerResources:
    requests:
      cpu: "50m"
      memory: "256Mi"
    limits:
      cpu: "2000m"
      memory: "4096Mi"
  installPlugins:
    # Top level plugins
    - kubernetes:3651.v908e7db_10d06
    - workflow-aggregator:590.v6a_d052e5a_a_b_5
    - git:4.11.3
    - configuration-as-code:1464.vd8507b_82e41a_
    - gitlab-oauth:1.16
    # Dependencies of the top level plugins. They need to be specified explicitly or the top level plugins
    # will try to grab the latest versions of them, which will break other dependency trees. It sucks
    # to have to maintain this list, but it is the only way that this author knows for how to make
    # consistently repeatable Jenkins deployments. This list is logged in the Jenkins init container
    # when Jenkins starts up. The list below needs to be updated when ever the list of top level plugins
    # changes. To update it, delete the list below, run the deployment, and get the new list of all
    # plugins from the init container logs.
    # To fix the formatting:
    # Use this find regex:           - (?<name>.*?) (?<version>.*?)$
    # And this replace regex:        - ${name}:${version}
  overwritePlugins: true
  sidecars:
    configAutoReload:
      enabled: true
  JCasC:
    defaultConfig: true

    configScripts:
      main: |-
        jenkins:
          systemMessage: "Jenkins configured automatically by Jenkins Configuration as Code (JCasC) Plugin.\n\n"

agent:
  enabled: true
  resources:
    requests:
      cpu: "512m"
      memory: "512Mi"
    limits:
      cpu: "512m"
      memory: "512Mi"
  alwaysPullImage: true
persistence:
  enabled: true
  storageClass: "local-path"
